<!doctype html>
<!-- EIA.gov API -->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>c-trl by c-trl</title>

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="http://bobdawg.org/images/ico/Link_Vista.ico">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
      
      
        <center><h1><a href="/home"><img src="http://i.imgur.com/9673XO4.png" class="home" height=120px width=120px></a></h1></center>
        <hr>
        <h3><a id="eia" class="anchor" href="#eia" aria-hidden="true"><span class="octicon octicon-link"></span></a>Working with the EIA.gov API</h3>
        <p><a href="/energy">Section I: Getting to Know the API, Configuration and Setup</a></p>
        <p><a href="/energy/p2">Section II: Aggregating EIA Data with Python</a></p>
        <p><a href="/energy/p3">Section III: Cleaning, Visualization with Pandas, Matplotlib</a></p>
        <p><a href="/energy/p4">Section IV: Understanding SVG Files with BeautifulSoup</a></p>
        <p><a href="/energy/p5">Section V: Geoplotting State-Level US Data to Create Heatmaps</a></p>

      </header>
      <section>
        <h3>
<a id="eia" class="anchor" href="#eia" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction to the EIA Website and API</h3>

<p>The <a href="http://www.eia.gov/" class="reference">U.S. Energy Information Administration</a> and is a great resource for anything energy data-related.  The site's most recent design updates provide GUI tools to explore various datasets.  However to really dig into and gather historical data en masse, it's easier to pull datasets in remotely.  Luckily, EIA has developed an API to allow for easy access to their data.  Full documentation for their API can be found <a href="http://www.eia.gov/beta/api/commands.cfm" class="reference">here</a></p>

<p>The two API calls that are used for this project in particular query EIA's datasets for keywords, and request data corresponding to specific data series IDs.</p>


<!-- HTML generated using hilite.me --><div class="hilite"><pre class="hilite"><span style="color: #f8f8f2">searches</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{}</span>

<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">search_keywords</span><span style="color: #f8f8f2">():</span>
    <span style="color: #f8f8f2">query</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">raw_input(</span><span style="color: #e6db74">&#39;Search for Keyword: &#39;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">query</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&#39;x&#39;</span> <span style="color: #f92672">or</span> <span style="color: #f8f8f2">query</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&#39;q&#39;</span><span style="color: #f8f8f2">:</span>
        <span style="color: #66d9ef">pass</span>
    <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
        <span style="color: #f8f8f2">base_url</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&#39;http://api.eia.gov/search/?search_term=name&amp;search_value=&quot;{}&quot;&amp;rows_per_page={}&#39;</span>
        <span style="color: #f8f8f2">r</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">requests</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">get(base_url</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">format(query,</span> <span style="color: #e6db74">&#39;10000&#39;</span><span style="color: #f8f8f2">))</span>
        <span style="color: #f8f8f2">text</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">r</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">text</span>
        <span style="color: #f8f8f2">master_dict</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">json</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">loads(text)</span>
        <span style="color: #f8f8f2">m</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">master_dict</span>
        <span style="color: #f8f8f2">data</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">m[</span><span style="color: #e6db74">&#39;response&#39;</span><span style="color: #f8f8f2">]</span>
        <span style="color: #f8f8f2">docs</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">data[</span><span style="color: #e6db74">&#39;docs&#39;</span><span style="color: #f8f8f2">]</span>
        <span style="color: #66d9ef">print</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;Search Results Found:&#39;</span><span style="color: #f8f8f2">)</span>
        <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">series</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">docs:</span>
            <span style="color: #66d9ef">print</span> <span style="color: #f8f8f2">{series[</span><span style="color: #e6db74">&#39;name&#39;</span><span style="color: #f8f8f2">]:series[</span><span style="color: #e6db74">&#39;series_id&#39;</span><span style="color: #f8f8f2">]}</span>
</pre></div>


<p>To access the EIA API, first <a href="http://www.eia.gov/beta/api/register.cfm" class="reference">complete registration to receive an API key.  The key will be used every time a request for data is made.

<h3>
<a class="blog-section" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting Up</h3>

<p>texttexttext.</p>
      </section>
      <footer>
       
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-50124410-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
